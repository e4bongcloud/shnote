# Slowloris DDoS 공격
이 공격은 웹 서버가 HTTP 헤더에서 '/r/n'을 전송받기 전에는 세션 종료를   
인지하지 못하고 계속 해서 세션을 유지하는 특성을 악용한 DDoS 공격을 의미한다.  
즉 모든 연결 자원을 소진시켜서 서비스 불가로 만드는게 목적인 공격방식입니다.  

서버로의 연결을 "천천히" 만듭니다. 공격자는 웹 서버에 대한 연결을 만들고 그 연결을 열어 두면서 요청을 지속적으로 보내며, 연결을 닫지 않습니다.  
이를 반복하면 웹 서버의 연결 자원이 모두 고갈되어 더 이상 새로운 연결을 받을 수 없게 됩니다.

공격자가 소수의 컴퓨터를 사용하여 진행되며, 대규모 DDoS 공격과 비교하면 상대적으로 적은 대역폭이 필요합니다.  
Slowloris DDoS 공격은 서버에서 사용하는 소프트웨어와 구성에 따라 성공적일 수 있습니다.

Slowloris DDoS 공격은 웹 서버의 취약점을 이용하지 않으며, 웹 서버 자체적으로 수행되므로 방어하기 어렵습니다.  
따라서, 웹 서버 보안을 강화하고 불필요한 연결이 열려 있지 않도록 주의해야합니다.

# 대응책
대응책이라 말했지만 완전한 대응책은 없으며 특정 수 이상의 세션 연결이 존재하면은 `iptables`와 ddos 대응장비 등을 사용하여 연결을 끊어버리고 blacklist ip를 지정하는 등의 방법을 활용하여 대응하는것입니다.  
가장 두가지 핵심은 `세션의 연결수`, `http header`를 주의깊게 보는것입니다.  

# iptables 방어

``` bash
iptables -A INPUT -p tcp --syn --dport 80 -m connlimit --connlimit-above 20 --connlimit-mask 32 -j REJECT --reject-with tcp-reset
```
이 예제는 완전하다고는 할순없지만 최대 20개이상의 연결이 있을시에 이를 초과하는 연결을 거부하는 공격입니다.  

특히 핵심은 
* `--connlimit-above 20`으로 하나의 아이피가 20개이상의 세션에 연결될때라는 옵션입니다.  
* `--connlimit-mask 32`는 IP 주소를 어떻게 매칭할지 지정하는 옵션입니다.  0~32범위의 mask범위를 가지고있습니다.  
